var Alert,Actions=function(a){this.setOptions(a)};Actions.prototype={options:{url:"",param:"",resultKey:"result",tipKey:"tip",successDiv:"#successTip",failedDiv:"#failedTip",infoDiv:"#infoTip",successCallBack:function(){},failedCallBack:function(){},infoCallBack:function(){}},setOptions:function(a){this.options=$.extend({},this.options,a)},submit:function(a){this.setOptions(a);var b=this;$.post(this.options.url,this.options.param,function(a){var c=a[b.options.resultKey],d=a[b.options.tipKey];"success"==c&&$.trim(d).length>0?($(b.options.successDiv).html(d),$(b.options.successDiv).slideDown(),window.setTimeout(function(){$(b.options.successDiv).slideUp()},3e3),"function"==typeof b.options.successCallBack&&b.options.successCallBack()):"failed"==c&&$.trim(d).length>0?($(b.options.failedDiv).html(d),$(b.options.failedDiv).slideDown(),window.setTimeout(function(){$(b.options.failedDiv).slideUp()},3e3),"function"==typeof b.options.failedCallBack&&b.options.failedCallBack()):$.trim(d).length>0&&($(b.options.infoDiv).html('<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>'+d),$(b.options.infoDiv).slideDown(),window.setTimeout(function(){$(b.options.infoDiv).slideUp()},1e4),"function"==typeof b.options.infoCallBack&&b.options.infoCallBack())})}},Alert=function(a){this.init(a)},Alert.prototype={options:{checkTable:"",alertDiv:"#alertDialog",validateForm:"#form",needSelected:!0,needConfirm:!0,needValidate:!1,showActionTip:!1,headerTip:tip_message.warning,confirmTip:tip_message.confirm_del,actionTip:"",confirmAction:function(){}},init:function(a){this.setOptions(a),this.$alertDialog=$(this.options.alertDiv),this.$alertHeader=this.$alertDialog.find(".modal-header h4"),this.$alertContent=this.$alertDialog.find(".modal-body"),this.$alertFooter=this.$alertDialog.find(".modal-footer");var b=this;this.$alertDialog.find(".modal-footer button.btn-default").click(function(){b.cancel()}),this.$alertDialog.find(".modal-footer button.btn-primary").click(function(){b.confirm()})},setOptions:function(a){this.options=$.extend({},this.options,a)},check:function(a){this.setOptions(a),this.$checkboxs=$(this.options.checkTable).find("tbody td input[type='checkbox']:checked"),this.options.needSelected&&0===this.$checkboxs.length?(this.actionFlag=!1,this.$alertDialog.find(".modal-dialog").width(280),this.$alertContent.css("padding","20px"),this.$alertHeader.html(tip_message.warning),this.$alertContent.html(tip_message.select_at_least_one),this.$alertFooter.show(),this.$alertDialog.modal("show")):(this.actionFlag=!0,this.options.needConfirm?(this.$alertHeader.html(this.options.headerTip),this.$alertContent.html(this.options.confirmTip),this.$alertFooter.show(),this.$alertDialog.modal("show")):this.confirm())},confirm:function(){if(this.actionFlag&&"function"==typeof this.options.confirmAction)if(this.options.needConfirm&&this.options.needValidate){var a=$(this.options.validateForm).inputValid(valid_message_options);if(Boolean(a)){if(!a.validate_all())return;this.options.confirmAction(this.$checkboxs),this.cancel()}else this.options.confirmAction(this.$checkboxs),this.cancel()}else this.options.confirmAction(this.$checkboxs),this.cancel(),this.options.showActionTip&&(this.$alertDialog.find(".modal-dialog").width(280),this.$alertContent.css("padding","20px"),this.$alertHeader.html(tip_message.tip),this.$alertContent.html(this.options.actionTip),this.$alertFooter.hide(),this.$alertDialog.modal("show"));else this.cancel()},cancel:function(){this.$alertDialog.modal("hide"),$(this.options.checkTable).find("thead th input[type='checkbox']").prop("checked",!1),this.$checkboxs=$(this.options.checkTable).find("tbody td input[type='checkbox']:checked"),Boolean(this.$checkboxs)&&this.$checkboxs.each(function(){$(this).prop("checked",!1)})}};